!function(){"use strict";function a(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}function b(){try{return localStorage.setItem("storage_test",1),localStorage.removeItem("storage_test"),!1}catch(a){return 22===a.code&&("QUOTA_EXCEEDED_ERR"===a.name||"QuotaExceededError"===a.name)}}angular.module("ra.storage",["ngCookies"]).provider("raStorage",function(){var c={prefix:!1,cookie:{path:"/"}};return{config:function(a){_.merge(c,a)},$get:function(d,e){return function(f,g){var h,i=!(!a()||b());c.prefix&&(f=c.prefix+"."+f),h=i?window.localStorage:{setItem:function(a,b){d.put(a,b,{path:"/"})},getItem:function(a){return d.get(a)},removeItem:function(a){d.remove(a)}};var j=function(a){return a=angular.toJson(a),h.setItem(f,a)},k=function(){var a=h.getItem(f);if(a)try{a=angular.fromJson(a)}catch(b){e.error(b)}return null===a&&g&&(a=g),a},l=function(){return h.removeItem(f)},m=function(a){if(angular.isObject(a)===!1)throw new Error("Type mismatch: trying to get/set a key for the stored value of type "+typeof a)};return{setStorageKey:function(a){f=a},set:function(a,b){return 1===arguments.length?j(a):this.setKey(a,b)},get:function(a){return angular.isUndefined(a)?k():this.getKey(a)},destroy:function(a){return angular.isUndefined(a)?l():this.destroyKey(a)},setKey:function(a,b){var c=k()||{};return m(c),c[a]=b,j(c)},getKey:function(a){var b=k()||{};return m(b),b[a]},destroyKey:function(a){var b=k()||{};return m(b),!!angular.isDefined(b[a])&&(delete b[a],j(b),!0)},isSupported:a,isPrivateBrowsing:b}}}}})}();